<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="/static/css/upload_form_style.css">
		<title>Visualization</title>
	</head>
<body background="/static/images/background.jpg">
		
	<nav id="navbar-example2" class="navbar navbar-light bg-light">
		<a class="navbar-brand" href="#">PRIVAZ</a>
		  <ul class="nav justify">
		  <li class="nav-item">
		    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Home</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="home">Logout</a>
		  </li>
		</ul>	
	</nav>
	<div class="row mt-4 text-center">
		<div class="col-5" id="inputs">
		<div class="row">
			<div class="col-3">
				<div class="input-group mb-3">
				  <div class="input-group-prepend">
				    <span class="input-group-text" id="basic-addon1">epsilon</span>
				  </div>
				  <input type="text" class="form-control" placeholder="0.1" aria-label="0.1" aria-describedby="basic-addon1" id="epsilon">
				</div>
			</div>

			<div class="col-3">
				<div class="input-group mb-3">
				  <div class="input-group-prepend">
				    <span class="input-group-text" id="basic-addon1">delta</span>
				  </div>
				  <input type="text" class="form-control" placeholder="0.1" aria-label="0.1" aria-describedby="basic-addon1" id="delta">
				</div>
			</div>
		</div>
		<form action="upload_process" method="POST" enctype="multipart/form-data">
			<input type="file" name="file">
						<button type="submit" name="submit"> {{ UPLOAD_STATUS }} </button>
		<!-- <div class="input-group mb-3">
		  <div class="input-group-prepend">
		    <span class="input-group-text" id="inputGroupFileAddon01">Upload Dataset</span>
		  </div>
		  <div class="custom-file">
		    <input type="file" class="custom-file-input" id="inputGroupFile01" aria-describedby="inputGroupFileAddon01">
		    <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
		  </div>
		</div> -->

		<div class="row">
			<div class="col-2">
				<br>
				<br>
				<button type="button" class="btn btn-dark">Query</button>
				<br>
				<hr>
				<br>
				<button type="button" onclick="Analysis3()" class="btn btn-dark" id="Analyze-Button">Analyze</button>
			</div>
			<div class="col" id="selector">
				<div class="row">
					<div class="col">
					<select class="custom-select" size="10">
					  <option selected>Select Item</option>
					  {{ OPTIONS_LIST|safe }}
					</select>
					</div>
					<div class="col">
					<select class="custom-select" size="10">
					  <option selected>Select Measure</option>
					  <option value="1">Mean</option>
					  <option value="2">Median</option>
					  <option value="3">Mode</option>
					</select>
					</div>
				</div>
			</div>
		</div>
	</div>
		<div class="col">
			<div id="figure">
				<img src= {{ source }} alt="Histogram will be displayed here once you click 'Analyze'" id="figure-address">
			</div>
		</div>
	</div>
<script type="text/javascript">
	function Analysis(){
		var xhttp = new XMLHttpRequest();
		var e=document.getElementById("epsilon").value;
		var d=document.getElementById("delta").value;
		xhttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
		      document.getElementById("figure-address").src =
		      this.responseText;
		    }
		  };
		xhttp.open("GET", "/process?e="+e+"&d="+d, true);
		xhttp.send();
	}
</script>
<script type="text/javascript">
	function Analysis2(){
		var xhttp = new XMLHttpRequest();
		var e=document.getElementById("epsilon").value;
		var d=document.getElementById("delta").value;
		xhttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
		      document.getElementById("figure").innerHTML =
		      this.responseText;
		    }
		  };
		xhttp.open("GET", "/process?e="+e+"&d="+d, true);
		xhttp.send();
	}
</script>
<script type="text/javascript">
	function Analysis3(){
		var xhttp = new XMLHttpRequest();
		var e=document.getElementById("epsilon").value;
		var d=document.getElementById("delta").value;
		xhttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
		      document.open();
		      document.write(this.responseText);
		      document.close();
		    }
		  };
		xhttp.open("GET", "/process?e="+e+"&d="+d, true);
		xhttp.send();
	}
</script>
</body>
</html>